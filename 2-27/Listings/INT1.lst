C51 COMPILER V9.00   INT1                                                                  03/06/2017 10:59:07 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE INT1
OBJECT MODULE PLACED IN .\Objects\INT1.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE source code\INT1.C OPTIMIZE(8,SPEED) BROWSE INCDIR(.\include) DEFINE(FOS
                    -C_160000) DEBUG OBJECTEXTEND PRINT(.\Listings\INT1.lst) TABS(2) OBJECT(.\Objects\INT1.obj)

line level    source

   1          /*--------------------------------------------------------------------------------------------------------
             --*/
   2          /*                                                                                                        
             - */
   3          /* Copyright(c) 2016 Nuvoton Technology Corp. All rights reserved.                                        
             - */
   4          /*                                                                                                        
             - */
   5          /*--------------------------------------------------------------------------------------------------------
             --*/
   6          
   7          //********************************************************************************************************
             -***
   8          //  Nuvoton Technoledge Corp. 
   9          //  Website: http://www.nuvoton.com
  10          //  E-Mail : MicroC-8bit@nuvoton.com
  11          //  Date   : Apr/21/2016
  12          //********************************************************************************************************
             -***
  13          
  14          //********************************************************************************************************
             -***
  15          //  File Function: N76E885 INT1_ISR
  16          //********************************************************************************************************
             -***
  17          
  18          #include "INT1.h"
  19          /*
  20          #define boot_code_min 32000       //8ms
  21          #define boot_code_max 60000       //15ms
  22          #define data0_min     3200        //0.8ms
  23          #define data0_max     6000        //1.5ms
  24          #define data1_min     8000        //2ms
  25          #define data1_max     10000       //2.5ms
  26          #define Num           33          //32code
  27          
  28          
  29          UINT8     CodeNum=0,Code[5]={0};
  30          uint32_t  time=0;
  31          BIT       First_INT=0,Start_Flag=0;
  32          */
  33          //-------------------------------------------------------------------------
  34          void INT1_ISR_init(void)
  35          {
  36   1          set_EX1;              //开启外部中断1
  37   1          set_IT1;              //下降沿触发
  38   1      }
  39          #if 0
              //-------------------------------------------------------------------------
              void INT1_ISR(void) interrupt 2
              {
                  if(!First_INT)
                  {
                      time = 0;
C51 COMPILER V9.00   INT1                                                                  03/06/2017 10:59:07 PAGE 2   

                      set_TR2;
                      First_INT = 1;
                  }
                  else
                  {
                      if((time>boot_code_min)&&(time<boot_code_max))
                      {
                          Start_Flag = 1;
                          CodeNum = 0;
                          time = 0;
                      }
                      else if(!Start_Flag)
                      {
                          First_INT = 1;
                          time = 0;
                      }
                      if(Start_Flag&&time!=0)
                      {
                          if((time>data0_min)&&(time<data0_max))          //code: 0
                          {
                              Code[CodeNum/8] = Code[CodeNum/8] & 0xfe;
                          }
                          else if((time>data1_min)&&(time<data1_max))     //code: 1
                          {
                              Code[CodeNum/8] = Code[CodeNum/8] | 0x01;
                          }
                          time = 0;
                          CodeNum++;
                          if(CodeNum>=Num)
                          {
                              clr_TR2;
                              CodeNum = 0;
                              Start_Flag = 0;
                              First_INT = 0;
                          }
                      }
                  }
              }
              #endif


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =      5    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
