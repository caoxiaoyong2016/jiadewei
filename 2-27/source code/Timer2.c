/*---------------------------------------------------------------------------------------------------------*/
/*                                                                                                         */
/* Copyright(c) 2016 Nuvoton Technology Corp. All rights reserved.                                         */
/*                                                                                                         */
/*---------------------------------------------------------------------------------------------------------*/

//***********************************************************************************************************
//  Nuvoton Technoledge Corp. 
//  Website: http://www.nuvoton.com
//  E-Mail : MicroC-8bit@nuvoton.com
//  Date   : Apr/21/2016
//***********************************************************************************************************

//***********************************************************************************************************
//  File Function: N76E885 Time2_ISR
//***********************************************************************************************************

#include "Time2.h"

unsigned long 		time1=0;
#define TH0_INIT        50//50000 
#define TL0_INIT        50//50000
#define TH1_INIT        25000 
#define TL1_INIT        25000

unsigned long u8TH0_Tmp,u8TL0_Tmp,u8TH1_Tmp,u8TL1_Tmp;

//-------------------------------------------------------------------------
void Time0_ISR_init(void)
{
	TIMER0_MODE1_ENABLE;
	clr_T0M;
	  u8TH0_Tmp = (65536-TH0_INIT)/256;
    u8TL0_Tmp = (65536-TL0_INIT)%256;
    TH0 = u8TH0_Tmp;
    TL0 = u8TL0_Tmp;
	set_ET0; 
}

/************************************************************************************************************
*    Timer2 interrupt subroutine
************************************************************************************************************/
void Timer0_ISR (void) interrupt 3  //interrupt address is 0x001B
{
    TH0 = u8TH0_Tmp;
    TL0 = u8TL0_Tmp;   
		time1++;
    P03 = ~P03;                     //P0.3 toggle when interrupt
}