C51 COMPILER V9.00   EX_INT1                                                               03/07/2017 17:02:02 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE EX_INT1
OBJECT MODULE PLACED IN .\Objects\ex-int1.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE module\ex-int1.c OPTIMIZE(8,SPEED) BROWSE INCDIR(.\include) DEFINE(FOSC_
                    -160000) DEBUG OBJECTEXTEND PRINT(.\Listings\ex-int1.lst) TABS(2) OBJECT(.\Objects\ex-int1.obj)

line level    source

   1          #include <stdio.h>
   2          #include "N76E003.h"
   3          #include "Define.h"
   4          #include "Common.h"
   5          #include "Delay.h"
   6          #include "SFR_Macro.h"
   7          #include "Function_define.h"
   8          #include "ex-int1.h"
   9          //#include "time2.h"
  10          
  11          extern UINT32 T2_count;
  12          
  13          UINT8 dat[4]={0};
  14          long m=0;
  15          
  16          void INT1_ISR_init(void)
  17          {
  18   1          set_EX1;              
  19   1          set_IT1;      //下降沿触发        
  20   1      }
  21          
  22          void INT1_ISR(void) interrupt 2
  23          {
  24   1        
  25   1        UINT8 i=0,j=0;
  26   1        
  27   1        clr_EX1;
  28   1        clr_GPIO1;                  //亮指示灯
  29   1        for(i=0;i<8;i++)            //8ms
  30   1        {
  31   2          Timer1_Delay1ms(1);
  32   2          if(P17)
  33   2          {
  34   3            set_EX1;
  35   3            return;
  36   3          }
  37   2        }
  38   1        while(!P17);
  39   1        
  40   1        for(i=0;i<4;i++)        //4ms
  41   1        {
  42   2          Timer1_Delay1ms(1);
  43   2          if(!P17)
  44   2          {
  45   3            set_EX1;
  46   3            return;
  47   3          }
  48   2        }
  49   1        while(P17);
  50   1        
  51   1          for(i=0;i<4;i++)            //32bit数据码
  52   1          {
  53   2              for(j=0;j<8;j++)
  54   2              {
C51 COMPILER V9.00   EX_INT1                                                               03/07/2017 17:02:02 PAGE 2   

  55   3                  while(!P17);        //0.56ms
  56   3                
  57   3                  Timer1_Delay1ms(1);
  58   3                  if(P17)             //数据 1
  59   3                  {
  60   4                      dat[i] >>= 1;
  61   4                      dat[i] |= 0x80;
  62   4                      while(P17);
  63   4                  }
  64   3                  else                //数据 0
  65   3                  {
  66   4                      dat[i] >>= 1;
  67   4                  }
  68   3              }
  69   2              
  70   2          }
  71   1            
  72   1          while(!P17);                //0.56ms
  73   1          
  74   1          for(i=0,j=0;i<40;i++)
  75   1          {
  76   2              Timer1_Delay1ms(1);
  77   2              if(!P17)
  78   2              {
  79   3                set_EX1;
  80   3                return;
  81   3              }
  82   2              j++;
  83   2          }
  84   1          while(P17);                 //40ms
  85   1          
  86   1          set_EX1;
  87   1          return;
  88   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    263    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      8       2
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
