C51 COMPILER V9.00   LCD1602                                                               03/21/2017 17:31:14 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE LCD1602
OBJECT MODULE PLACED IN .\Objects\LCD1602.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE module\LCD1602.c OPTIMIZE(8,SPEED) BROWSE INCDIR(.\include;.\common;.\mo
                    -dule) DEFINE(FOSC_160000) DEBUG OBJECTEXTEND PRINT(.\Listings\LCD1602.lst) TABS(2) OBJECT(.\Objects\LCD1602.obj)

line level    source

   1          #include  "LCD1602.h"
*** ERROR C202 IN LINE 10 OF MODULE\LCD1602.H: 'P0': undefined identifier
*** ERROR C202 IN LINE 11 OF MODULE\LCD1602.H: 'P0': undefined identifier
*** ERROR C202 IN LINE 12 OF MODULE\LCD1602.H: 'P0': undefined identifier
*** ERROR C202 IN LINE 13 OF MODULE\LCD1602.H: 'P0': undefined identifier
   2            
   3            
   4            void LCD_Delay(uint n)
   5            {
   6   1          while(--n);       // 8us一次
   7   1        }
   8          
   9            
  10            void LCD_BusyCheck(void)
  11            {
  12   1          uchar isBusy;
  13   1          LCD_RS = 0;
*** ERROR C202 IN LINE 13 OF MODULE\LCD1602.C: 'LCD_RS': undefined identifier
  14   1          LCD_RW = 1;
*** ERROR C202 IN LINE 14 OF MODULE\LCD1602.C: 'LCD_RW': undefined identifier
  15   1          LCD_E  = 1;
*** ERROR C202 IN LINE 15 OF MODULE\LCD1602.C: 'LCD_E': undefined identifier
  16   1          LCD_Delay(10);
  17   1          isBusy = DataPin & 0x80;     
*** ERROR C202 IN LINE 17 OF MODULE\LCD1602.C: 'P0': undefined identifier
  18   1          LCD_E  = 0;
*** ERROR C202 IN LINE 18 OF MODULE\LCD1602.C: 'LCD_E': undefined identifier
  19   1      
  20   1          if(isBusy == 0x80)
  21   1          {
  22   2            LCD_BusyCheck();
  23   2          }
  24   1        }
  25          
  26            void LCD_WriteByte(uchar var,bit RS )    //参数 RS为 LCD数据/ 命令选择 ,高电平时选择数据寄存器
  27            {
  28   1          LCD_BusyCheck();
  29   1          LCD_RS = RS;
*** ERROR C202 IN LINE 29 OF MODULE\LCD1602.C: 'LCD_RS': undefined identifier
  30   1          LCD_RW = 0;
*** ERROR C202 IN LINE 30 OF MODULE\LCD1602.C: 'LCD_RW': undefined identifier
  31   1          DataPin = var;
*** ERROR C202 IN LINE 31 OF MODULE\LCD1602.C: 'P0': undefined identifier
  32   1          LCD_E = 0;
*** ERROR C202 IN LINE 32 OF MODULE\LCD1602.C: 'LCD_E': undefined identifier
  33   1          LCD_Delay(70);            //必须延时500us左右   
  34   1          LCD_E  = 1;
*** ERROR C202 IN LINE 34 OF MODULE\LCD1602.C: 'LCD_E': undefined identifier
  35   1          LCD_Delay(5);
  36   1          LCD_E = 0;
*** ERROR C202 IN LINE 36 OF MODULE\LCD1602.C: 'LCD_E': undefined identifier
  37   1        }
  38          
  39            void LCD_WriteString(uchar *str,uchar line)
C51 COMPILER V9.00   LCD1602                                                               03/21/2017 17:31:14 PAGE 2   

  40            {
  41   1          uchar i = 0,addr;
  42   1          if(line == 1) { addr = 0x80;}
  43   1          if(line == 2) { addr = 0xC0;}
  44   1          while(1)    
  45   1          {     
  46   2            LCD_WriteByte(addr+i,0);     //写入地址
  47   2            LCD_WriteByte(str[i],1);
  48   2            i++;
  49   2            if(i==16 || str[i] == '\0'){ break;}
  50   2          }     
  51   1        }
  52          
  53            void LCD_CGRAM_WriteByte(uchar *p,uchar num)       //将自定义字符写入CGRAM中,最多64字节,uchar num为自定义字
             -符存放位置 0-7
  54            {
  55   1          uchar i,place;
  56   1          place = 0x40 + 8*(num&0x07);          // num & 0x07 保证num取值范围为 0-7
  57   1          for(i=0;i<8;i++)
  58   1          {
  59   2            LCD_WriteByte(place+i,0);   
  60   2            LCD_WriteByte(p[i],1);
  61   2          }
  62   1        }
  63          
  64          
  65            void LCD_Init(void)
  66            {
  67   1          LCD_Delay(1875);      //延时15ms
  68   1          LCD_WriteByte(0x38,0);
  69   1          LCD_Delay(625);       //延时5ms
  70   1          LCD_WriteByte(0x38,0);  //配置LCD为4位数据总线,双行显示,5*7点阵字符
  71   1          LCD_WriteByte(0x08,0);  //配置LCD关闭显示,无光标,无闪烁
  72   1          LCD_WriteByte(0x01,0);  //LCD清屏
  73   1          LCD_WriteByte(0x06,0);  //LCD光标右移
  74   1          LCD_WriteByte(0x0C,0);  //打开LCD显示
  75   1        }

C51 COMPILATION COMPLETE.  0 WARNING(S),  15 ERROR(S)
