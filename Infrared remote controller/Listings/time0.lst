C51 COMPILER V9.00   TIME0                                                                 04/08/2017 00:23:16 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE TIME0
OBJECT MODULE PLACED IN .\Objects\time0.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE module\time0.c OPTIMIZE(8,SPEED) BROWSE INCDIR(.\include;.\common;.\modu
                    -le) DEFINE(FOSC_160000) DEBUG OBJECTEXTEND PRINT(.\Listings\time0.lst) OBJECT(.\Objects\time0.obj)

line level    source

   1          #include        "time0.h"
   2          
   3          extern  UINT8   adc_count;
   4          
   5          UINT8   adc_data = 0;
   6          UINT8   adc_V = 0;
   7          bit             adc_V_flag = 0;
   8          UINT8   u8TH0_Tmp_1ms,u8TL0_Tmp_1ms;
   9          UINT16  adc_flag=0;
  10          
  11          #define TH0_INIT_1ms    13290
  12          #define TL0_INIT_1ms    13290
  13          
  14          
  15          
  16          void timer0_init(void)
  17          {
  18   1              set_T0M;                //ÏµÍ³Ê±ÖÓ
  19   1              u8TH0_Tmp_1ms = (65536-TH0_INIT_1ms)/256;
  20   1              u8TL0_Tmp_1ms = (65536-TL0_INIT_1ms)%256;
  21   1              TH0 = u8TH0_Tmp_1ms;
  22   1          TL0 = u8TL0_Tmp_1ms;
  23   1              set_ET0;
  24   1      }
  25          
  26          void Timer0_ISR (void) interrupt 1 
  27          {
  28   1              TH0 = u8TH0_Tmp_1ms;
  29   1          TL0 = u8TL0_Tmp_1ms;
  30   1              adc_flag++;
  31   1              if(adc_flag>=5000)
  32   1              {
  33   2      //              P12=~P12;
  34   2                      adc_data += adc_start();
  35   2                      if(adc_count == times)
  36   2                      {
  37   3                              adc_V = adc_data/100;
  38   3                              adc_count = 0;
  39   3                              adc_V_flag = 1;
  40   3                      }
  41   2      //              if(adc_V_flag)
  42   2      //              {
  43   2      //                      if(adc_V < V_3_3)
  44   2      //                      {
  45   2      //                              //ST_BY = 1;
  46   2      //                              BT_POWER = 0;
  47   2      //                              __delay_ms(50);
  48   2      //                              ST_BY = 0;
  49   2      //                      }
  50   2      //                      else if(adc_V < V_3_5)
  51   2      //                      {
  52   2      //                              LOW_BAT_NOTIFY = 0;
  53   2      //                      }
  54   2      //                      else
C51 COMPILER V9.00   TIME0                                                                 04/08/2017 00:23:16 PAGE 2   

  55   2      //                      {
  56   2      //                              LOW_BAT_NOTIFY = 1;
  57   2      //                      }
  58   2      //              }
  59   2                      adc_flag = 0;
  60   2              }
  61   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    129    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      6    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      1    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
