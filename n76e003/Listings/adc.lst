C51 COMPILER V9.00   ADC                                                                   04/14/2017 10:16:50 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE ADC
OBJECT MODULE PLACED IN .\Output\adc.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE src\adc.c OPTIMIZE(8,SPEED) BROWSE INCDIR(.\src;.\include) DEFINE(FOSC_1
                    -60000) DEBUG OBJECTEXTEND PRINT(.\Listings\adc.lst) OBJECT(.\Output\adc.obj)

line level    source

   1          #include "adc.h"
   2          
   3          /*************  本地变量声明    **************/
   4          UINT8   adc_count = 0;
   5          //UINT8 adc_data = 0;
   6          //UINT8 adc_V = 0;
   7          //bit           adc_V_flag = 0;
   8          
   9          //void Timer0_ISR_adc (void) interrupt 1 
  10          //{
  11          //      adc_data += adc_start();
  12          //      if(adc_count == times)
  13          //      {
  14          //              adc_V = adc_data/100;
  15          //              adc_count = 0;
  16          //              adc_V_flag = 1;
  17          //      }
  18          //      if(adc_V_flag)
  19          //      {
  20          //              if(adc_V < V_3_3)
  21          //              {
  22          //                      ST_BY = 0;
  23          //                      BT_POWER = 0;
  24          //              }
  25          //              else if(adc_V < V_3_5)
  26          //              {
  27          //                      LOW_BAT_NOTIFY = 0;
  28          //              }
  29          //              else
  30          //              {
  31          //                      LOW_BAT_NOTIFY = 1;
  32          //              }
  33          //      }
  34          //}
  35          UINT8   adc_start(void)
  36          {
  37   1              UINT8   adc_dat = 0;
  38   1              clr_ADCF;
  39   1              set_ADCS;
  40   1              while(ADCF == 0);
  41   1              adc_dat = ADCRH;
  42   1              adc_count++;
  43   1              return  adc_dat;
  44   1      }
  45          
  46          
  47          void    adc_init(void)
  48          {
  49   1              Enable_ADC_AIN0;
  50   1      }
  51          
  52          #if 0
              void    adc_init(void)
              {
C51 COMPILER V9.00   ADC                                                                   04/14/2017 10:16:50 PAGE 2   

                      ADCCON0&=0xc0;          //AD转换启动AD标志完成
                      AINDIDS=0x00;           
                      AIN(AINx);                      //通道选择并配置
                      ADCCON1|=SET_BIT0;      //ADC使能
              }
              
              void    AIN     (UINT8  adc_AINx)
              {
                      switch(adc_AINx)
                      {
                              case    AIN0:
                                      ADCCON0 |= 0x00;
                                      P17_Input_Mode;
                                      AINDIDS|=SET_BIT0;
                                      break;
                              
                              case    AIN1:
                                      ADCCON0 |= 0x01;
                                      P30_Input_Mode;
                                      AINDIDS|=SET_BIT1;
                                      break;
                              
                              case    AIN2:
                                      ADCCON0 |= 0x02;
                                      P07_Input_Mode;
                                      AINDIDS|=SET_BIT2;
                                      break;
                                      
                              case    AIN3:
                                      ADCCON0 |= 0x03;
                                      P06_Input_Mode;
                                      AINDIDS|=SET_BIT3;
                                      break;
                                      
                              case    AIN4:
                                      ADCCON0 |= 0x04;
                                      P05_Input_Mode;
                                      AINDIDS|=SET_BIT4;
                                      break;
                                      
                              case    AIN5:
                                      ADCCON0 |= 0x05;
                                      P04_Input_Mode;
                                      AINDIDS|=SET_BIT5;
                                      break;
                                      ;
                              case    AIN6:
                                      ADCCON0 |= 0x06;
                                      P03_Input_Mode;
                                      AINDIDS|=SET_BIT6;
                                      break;
                                      
                              case    AIN7:
                                      ADCCON0 |= 0x07;
                                      P11_Input_Mode;
                                      AINDIDS|=SET_BIT7;
                                      break;
                                      
                              default:
                                      break;
                      }
              }
C51 COMPILER V9.00   ADC                                                                   04/14/2017 10:16:50 PAGE 3   

              #endif


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     33    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      1    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
