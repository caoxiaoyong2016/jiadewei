C51 COMPILER V9.00   TIMER3                                                                04/12/2017 13:39:08 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE TIMER3
OBJECT MODULE PLACED IN .\Output\Timer3.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE Code\Timer3.c OPTIMIZE(8,SPEED) BROWSE INCDIR(..\..\Include) DEFINE(FOSC
                    -_160000) DEBUG OBJECTEXTEND PRINT(.\LST\Timer3.lst) OBJECT(.\Output\Timer3.obj)

line level    source

   1          /*--------------------------------------------------------------------------------------------------------
             --*/
   2          /*                                                                                                        
             - */
   3          /* Copyright(c) 2015 Nuvoton Technology Corp. All rights reserved.                                        
             - */
   4          /*                                                                                                        
             - */
   5          /*--------------------------------------------------------------------------------------------------------
             --*/
   6          
   7          //********************************************************************************************************
             -***
   8          //  Nuvoton Technoledge Corp. 
   9          //  Website: http://www.nuvoton.com
  10          //  E-Mail : MicroC-8bit@nuvoton.com
  11          //  Date   : Apr/21/2015
  12          //********************************************************************************************************
             -***
  13          
  14          //********************************************************************************************************
             -***
  15          //  File Function: N76E885 Timer3 demo code
  16          //********************************************************************************************************
             -***
  17          
  18          #include <stdio.h>
  19          #include "N76E885.h"
  20          //#include "Typedef.h"
  21          #include "Define.h"
  22          #include "SFR_Macro.h"
  23          #include "Common.h"
  24          #include "Delay.h"
  25          
  26          /*
  27          //-------- <<< Use Configuration Wizard in Context Menu >>> ------------------
  28          //
  29          //<e0> System Clock Source Configuration
  30          // <o1> System Clock Source Selection
  31          //      <0=> 2~25MHz    XTAL
  32          //      <1=> 32.768KHz  XTAL
  33          //      <2=> 22.1184MHz Internal
  34          //      <3=> 10KHz      Internal
  35          //      <4=> OSC-In     External
  36          //</e>
  37          //
  38          //<e2> Clock Divider Configuration
  39          //     <o3.0..7>  System Clock Source Devider  <1-255>
  40          //                     <i> Fsys = (System Clock Source) / (2 * Devider)
  41          //</e>
  42          //
  43          // <o4> Pre-Scalar Divider
  44          //      <0=> 1/1     
  45          //      <1=> 1/2     
C51 COMPILER V9.00   TIMER3                                                                04/12/2017 13:39:08 PAGE 2   

  46          //      <2=> 1/3     
  47          //      <3=> 1/8     
  48          //      <4=> 1/16    
  49          //      <5=> 1/32    
  50          //      <6=> 1/64    
  51          //      <7=> 1/128   
  52          //
  53          //-------- <<< end of configuration section >>> ------------------------------
  54          */
  55          
  56          #define SYS_CLK_EN      0
  57          #define SYS_SEL         2
  58          #define SYS_DIV_EN      0                       //0: Fsys=Fosc, 1: Fsys = Fosc/(2*CKDIV)
  59          #define SYS_DIV         1
  60          #define PRE_SCALAR      0
  61          
  62          #define RELOAD_VALUE_H  (65536-50)/256
  63          #define RELOAD_VALUE_L  (65536-50)%256
  64          bit BIT_TMP;
  65          /*********************************************************************************************************
             -***
  66          *    TIMER 2 interrupt subroutine
  67          **********************************************************************************************************
             -**/
  68          void Timer3_ISR (void) interrupt 16 
  69          {
  70   1          clr_TF3;
  71   1          P02 = ~P02;                                 //P0.2 toggle when TF3 interrupt
  72   1      }
  73          
  74          /*********************************************************************************************************
             -***
  75          *    Main function 
  76          **********************************************************************************************************
             -**/
  77          void main (void)
  78          {
  79   1          /* Note
  80   1             MCU power on system clock is HIRC (22.1184MHz), so Fsys = 22.1184MHz
  81   1          */
  82   1          
  83   1          Set_All_GPIO_Quasi_Mode();
*** WARNING C206 IN LINE 83 OF CODE\TIMER3.C: 'Set_All_GPIO_Quasi_Mode': missing function-prototype
  84   1      
  85   1          
  86   1          /* Change system closk source */
  87   1          #if SYS_CLK_EN == 1
                      #if   SYS_SEL == 0
                          System_Clock_Select(E_HXTEN);   //Fosc = 2~25MHz XTAL
                      #elif SYS_SEL == 1
                          System_Clock_Select(E_LXTEN);   //Fosc = 32.768KHz XTAL
                      #elif SYS_SEL == 2
                          System_Clock_Select(E_HIRCEN);  //Fosc = 22.1184MHz Internal RC
                      #elif SYS_SEL == 3
                          System_Clock_Select(E_LIRCEN);  //Fosc = 10KHz Internal RC
                      #elif SYS_SEL == 4
                          System_Clock_Select(E_OSCEN);   //Fosc = OSC-In External OSC
                      #endif
                  #endif
 100   1          
 101   1          #if SYS_DIV_EN == 1
                      CKDIV = SYS_DIV;                        //Fsys = Fosc / (2* CLKDIV) = Fcpu
C51 COMPILER V9.00   TIMER3                                                                04/12/2017 13:39:08 PAGE 3   

                  #endif
 104   1      
 105   1          #if   PRE_SCALAR == 0
 106   1              T3CON = 0;
 107   1          #elif PRE_SCALAR == 1
                      T3CON = 1;
                  #elif PRE_SCALAR == 2
                      T3CON = 2;
                  #elif PRE_SCALAR == 3
                      T3CON = 3;
                  #elif PRE_SCALAR == 4
                      T3CON = 4;
                  #elif PRE_SCALAR == 5
                      T3CON = 5;
                  #elif PRE_SCALAR == 6
                      T3CON = 6;
                  #elif PRE_SCALAR == 7
                      T3CON = 7;
                  #endif
 122   1          
 123   1          RH3 = RELOAD_VALUE_H;                       //initial counter values 
 124   1          RL3 = RELOAD_VALUE_L;    
 125   1          
 126   1          set_ET3;                                    //enable Timer3 interrupt
 127   1          set_EA;                                     //enable interrupts
 128   1          set_TR3;                                    //Timer3 run
 129   1      
 130   1          while(1);
 131   1      }
 132          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     28    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      1    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  1 WARNING(S),  0 ERROR(S)
